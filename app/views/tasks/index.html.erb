<% if @error_message %>
    <div class="form-error">
        <%= @error_message %>
    </div>
<% end %>

<h1>タスク登録</h1>
<%= form_tag("/tasks/create") do%>
    <p>タスク名</p>
    <input name="task_name">
    <p>期限</p>
    <%= date_select(:due_date,:date,date_separator: '/',use_month_numbers: true) %>
    <p>実行日</p>
    <%= date_select(:execution_date,:date,{date_separator: '/',use_month_numbers: true}) %>
    <input type="submit" value="登録">
<% end %>


<h1>タスク一覧</h1>
<table>
    <tr>
        <th>タスク名</th>
        <th>期日<%= sort_asc("due_date") %><%= sort_desc("due_date") %></th>
        <th>実行日<%= sort_asc("execution_date") %><%= sort_desc("execuiton_date") %></th>
        <th>完了</th>
    </tr>
<% @tasks.each do |task| %>
    <% if task.done_flg != true %>
        <tr>
            <th><%= "#{task.task_name}" %></th>
            <th><%= "#{task.due_date}" %></th>
            <th><%= "#{task.execution_date}" %></th>
            <th><%= link_to("×", "/tasks/done/#{task.id}",{method: :post}) %></th>
        </tr>
    <% end %>
<% end %>
</table>